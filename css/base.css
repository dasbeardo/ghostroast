/**
 * Roast Mortem - Base Styles
 * Reset, fundamental layout, and utility classes.
 */

/* ==========================================
   RESET
   ========================================== */

*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  /* Prevent font size inflation on mobile */
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

html, body {
  height: 100%;
  overflow: hidden; /* Fixed viewport - no page scroll */
}

body {
  font-family: var(--font-body);
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  color: var(--color-text-primary);
  background: var(--color-bg-dark);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Remove list styles */
ul, ol {
  list-style: none;
}

/* Sensible img defaults */
img, picture, video, canvas, svg {
  display: block;
  max-width: 100%;
}

/* Remove built-in form typography */
input, button, textarea, select {
  font: inherit;
}

/* Avoid text overflows */
p, h1, h2, h3, h4, h5, h6 {
  overflow-wrap: break-word;
}

/* ==========================================
   GAME CONTAINER
   Fixed viewport that contains the entire game.
   ========================================== */

.game-container {
  width: 100%;
  max-width: var(--viewport-max);
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile */
  margin: 0 auto;
  background: var(--color-bg-dark);
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  /* Safe area padding for notched devices */
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
}

/* Larger screens get more width */
@media (min-width: 600px) {
  .game-container {
    max-width: 540px;
  }
}

@media (min-width: 900px) {
  .game-container {
    max-width: 600px;
  }
}

/* Optional: subtle vignette effect */
.game-container::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
    ellipse at center,
    transparent 50%,
    rgba(0, 0, 0, 0.3) 100%
  );
  z-index: var(--z-base);
}

/* ==========================================
   SCREEN BASE
   Each screen fills the container.
   Pattern: header (fixed) → content (scrolls) → footer (fixed)
   ========================================== */

.screen {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: var(--z-base);
}

/* Hidden screens */
.screen[hidden],
.screen.hidden {
  display: none;
}

/* Screen sections */
.screen__header,
.screen__footer,
.screen__actions {
  flex-shrink: 0; /* Don't shrink - stay fixed size */
}

.screen__content {
  flex: 1;           /* Take remaining space */
  overflow-y: auto;  /* Scroll when content overflows */
  overflow-x: hidden;
  min-height: 0;     /* Fix flexbox scroll bug */
}

/* Screen with scrollable content area (legacy support) */
.screen--scrollable {
  overflow-y: auto;
  overflow-x: hidden;
}

/* Scrollable container utility */
.scrollable {
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
  -webkit-overflow-scrolling: touch;
}

/* Hide scrollbar but keep functionality */
.scrollable--hidden-bar {
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.scrollable--hidden-bar::-webkit-scrollbar {
  display: none;
}

/* ==========================================
   FOCUS & ACCESSIBILITY
   ========================================== */

/* Focus visible for keyboard navigation */
:focus-visible {
  outline: 2px solid var(--color-interactive);
  outline-offset: 2px;
}

/* Remove focus ring for mouse users */
:focus:not(:focus-visible) {
  outline: none;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ==========================================
   TYPOGRAPHY UTILITIES
   ========================================== */

.text-display { font-family: var(--font-display); }
.text-ui { font-family: var(--font-ui); }
.text-body { font-family: var(--font-body); }

.text-xs { font-size: var(--text-xs); }
.text-sm { font-size: var(--text-sm); }
.text-base { font-size: var(--text-base); }
.text-md { font-size: var(--text-md); }
.text-lg { font-size: var(--text-lg); }
.text-xl { font-size: var(--text-xl); }
.text-2xl { font-size: var(--text-2xl); }
.text-3xl { font-size: var(--text-3xl); }

.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.uppercase { text-transform: uppercase; }
.capitalize { text-transform: capitalize; }

.font-bold { font-weight: bold; }
.font-normal { font-weight: normal; }

/* ==========================================
   COLOR UTILITIES
   ========================================== */

.text-primary { color: var(--color-text-primary); }
.text-secondary { color: var(--color-text-secondary); }
.text-bright { color: var(--color-text-bright); }
.text-green { color: var(--color-accent-green); }
.text-amber { color: var(--color-accent-amber); }
.text-teal { color: var(--color-accent-teal); }
.text-red { color: var(--color-accent-red); }

.bg-dark { background-color: var(--color-bg-dark); }
.bg-mid { background-color: var(--color-bg-mid); }
.bg-surface { background-color: var(--color-bg-surface); }

/* ==========================================
   SPACING UTILITIES
   ========================================== */

.p-0 { padding: 0; }
.p-xs { padding: var(--space-xs); }
.p-sm { padding: var(--space-sm); }
.p-md { padding: var(--space-md); }
.p-lg { padding: var(--space-lg); }
.p-xl { padding: var(--space-xl); }

.m-0 { margin: 0; }
.m-auto { margin: auto; }
.mx-auto { margin-left: auto; margin-right: auto; }
.mt-auto { margin-top: auto; }
.mb-auto { margin-bottom: auto; }

.mt-xs { margin-top: var(--space-xs); }
.mt-sm { margin-top: var(--space-sm); }
.mt-md { margin-top: var(--space-md); }
.mt-lg { margin-top: var(--space-lg); }
.mt-xl { margin-top: var(--space-xl); }

.mb-xs { margin-bottom: var(--space-xs); }
.mb-sm { margin-bottom: var(--space-sm); }
.mb-md { margin-bottom: var(--space-md); }
.mb-lg { margin-bottom: var(--space-lg); }
.mb-xl { margin-bottom: var(--space-xl); }

.gap-xs { gap: var(--space-xs); }
.gap-sm { gap: var(--space-sm); }
.gap-md { gap: var(--space-md); }
.gap-lg { gap: var(--space-lg); }
.gap-xl { gap: var(--space-xl); }

/* ==========================================
   FLEXBOX UTILITIES
   ========================================== */

.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-row { flex-direction: row; }
.flex-wrap { flex-wrap: wrap; }
.flex-1 { flex: 1; }
.flex-shrink-0 { flex-shrink: 0; }

.items-start { align-items: flex-start; }
.items-center { align-items: center; }
.items-end { align-items: flex-end; }

.justify-start { justify-content: flex-start; }
.justify-center { justify-content: center; }
.justify-end { justify-content: flex-end; }
.justify-between { justify-content: space-between; }

/* ==========================================
   LAYOUT UTILITIES
   ========================================== */

.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }

.inset-0 { inset: 0; }

.w-full { width: 100%; }
.h-full { height: 100%; }

.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }

/* ==========================================
   VISIBILITY
   ========================================== */

.hidden { display: none !important; }
.invisible { visibility: hidden; }
.opacity-0 { opacity: 0; }
.opacity-50 { opacity: 0.5; }
.opacity-100 { opacity: 1; }

/* Screen reader only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
